name: Badger Culvert Assessment Data Admin

on:
  schedule:
      - cron: 0 4 * * * # every day at 4am PST
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    env:
      AGO_USER: ${{ secrets.AGO_USER }}
      AGO_PASS: ${{ secrets.AGO_PASS }}
      MAPHUB_URL: ${{ secrets.MAPHUB_URL }}
      CULVERT_ITEM_ID: ${{ secrets.BADGER_CULVERT_ITEM_ID }}

    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.11.11'
    - name: Install libkrb5 for Kerberos on Linux
      run: |
        sudo apt-get update
        sudo apt-get install -y krb5-user libkrb5-dev
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r reporting_environment.yaml
    - name: Run Badger Culvert Assessment Workflow
      run: badger_scripts/culvert_assessment_data_admin.py



